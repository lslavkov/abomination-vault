{"_id":"0MAPW77OfGPPAGN6","name":"New Macro","type":"script","author":"qE1KhDrO8xa5P2lb","img":"icons/svg/dice-target.svg","scope":"global","command":"function tokenUpdate(data) {\n  canvas.tokens.controlled.map((token) => token.update(data));\n}\n\nlet torchAnimation = { type: \"torch\", speed: 1, intensity: 1 };\n\nlet dialogEditor = new Dialog({\n  title: `Token Light Picker`,\n\n  content: `Pick the light source the selected token is holding.`,\n\n  buttons: {\n    none: {\n      label: `None`,\n\n      callback: () => {\n        tokenUpdate({ dimLight: 0, brightLight: 0, lightAngle: 360 });\n\n        dialogEditor.render(true);\n      },\n    },\n\n    torch: {\n      label: `Torch`,\n\n      callback: () => {\n        tokenUpdate({\n          dimLight: 40,\n          brightLight: 20,\n          lightAngle: 360,\n          lightAnimation: torchAnimation,\n        });\n\n        dialogEditor.render(true);\n      },\n    },\n\n    light: {\n      label: `Light cantrip`,\n\n      callback: () => {\n        tokenUpdate({\n          dimLight: 40,\n          brightLight: 20,\n          lightAngle: 360,\n          lightAnimation: { type: \"none\" },\n        });\n\n        dialogEditor.render(true);\n      },\n    },\n\n    lamp: {\n      label: `Lamp`,\n\n      callback: () => {\n        tokenUpdate({\n          dimLight: 45,\n          brightLight: 15,\n          lightAngle: 360,\n          lightAnimation: torchAnimation,\n        });\n\n        dialogEditor.render(true);\n      },\n    },\n\n    bullseye: {\n      label: `Bullseye Lantern`,\n\n      callback: () => {\n        tokenUpdate({\n          dimLight: 120,\n          brightLight: 60,\n          lightAngle: 45,\n          lightAnimation: torchAnimation,\n        });\n\n        dialogEditor.render(true);\n      },\n    },\n\n    hoodedOpen: {\n      label: `Hooded Lantern (Open)`,\n\n      callback: () => {\n        tokenUpdate({\n          dimLight: 60,\n          brightLight: 30,\n          lightAngle: 360,\n          lightAnimation: torchAnimation,\n        });\n\n        dialogEditor.render(true);\n      },\n    },\n\n    hoodedClosed: {\n      label: `Hooded Lantern (Closed)`,\n\n      callback: () => {\n        tokenUpdate({\n          dimLight: 5,\n          brightLight: 0,\n          lightAngle: 360,\n          lightAnimation: torchAnimation,\n        });\n\n        dialogEditor.render(true);\n      },\n    },\n\n    darkness: {\n      label: `Darkness spell`,\n\n      callback: () => {\n        tokenUpdate({\n          dimLight: 0,\n          brightLight: -15,\n          lightAngle: 360,\n          lightAnimation: { type: \"none\" },\n        });\n\n        dialogEditor.render(true);\n      },\n    },\n\n    close: {\n      icon: \"<i class='fas fa-tick'></i>\",\n\n      label: `Close`,\n    },\n  },\n\n  default: \"close\",\n\n  close: () => {},\n});\n\ndialogEditor.render(true);","folder":null,"sort":0,"permission":{"default":0,"qE1KhDrO8xa5P2lb":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"name":"Exploration Activities Request","type":"script","author":"qE1KhDrO8xa5P2lb","img":"icons/svg/dice-target.svg","scope":"global","command":"// Macro for GM to request exploration activities from selected players\nconst tokens = canvas.tokens.controlled.filter((t) => ['character'].includes(t.actor.data.type));\n\nif (tokens.length === 0) {\n    ui.notifications.error(`You must select at least one pc token`);\n} else {\n    let chatData = {\n        content: \"GM has requested Exploration Activities\",\n    };\n    ChatMessage.create(chatData, {});\n    tokens.map((p) => p.actor).forEach((actor) =>\n    game.socket.emit('module.pf2e-exploration-activities', {\n      operation: 'playerExplorationActivity',\n      actor\n  }));\n}","folder":null,"sort":0,"permission":{"default":0,"fIA598aUiI634NnA":3,"qE1KhDrO8xa5P2lb":3},"flags":{"core":{"sourceId":"Macro.sVT84BxF1odSuHfX"}},"_id":"q06zfBY7ppl58MNf"}
